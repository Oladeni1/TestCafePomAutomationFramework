"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const service_routes_1 = __importDefault(require("../proxy/service-routes"));
const read_file_relative_1 = require("read-file-relative");
const get_client_script_suffix_1 = __importDefault(require("./get-client-script-suffix"));
const serviceRouteValues = Object.values(service_routes_1.default);
const loadedScriptsCache = {};
function get(key) {
    if (loadedScriptsCache[key])
        return loadedScriptsCache[key];
    const script = (0, read_file_relative_1.readSync)(key);
    loadedScriptsCache[key] = script;
    return script;
}
function default_1(name, devMode) {
    if (!serviceRouteValues.includes(name))
        throw new Error(`Unknown service route value: ${name}`);
    const parts = name.split('.');
    const resultPath = `../client${parts[0]}${(0, get_client_script_suffix_1.default)(devMode)}.${parts[1]}`;
    return get(resultPath);
}
exports.default = default_1;module.exports = exports.default;

